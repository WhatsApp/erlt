-file("rtos.erl", 1).

-module(rtos).

-export([make_erlt/1,field_erlt/1,update_erlt/2,update_erlt/3]).

-export([make_erl1/1,field_erl1/1,update_erl1/2,update_erl1/3]).

-records_to_convert_to_structs([erlt]).

-record(erlt,{a, b = 1 + 2, c}).

-record(erl1,{x, y = 2 * 4 :: integer(), z}).

make_erlt(Val) ->
    #{'--struct--' => erlt,
      a => undefined,
      b => Val,
      c => #erl1{x = undefined, y = 2 * 4, z = undefined}}.

field_erlt(Str) ->
    maps:get(a, Str).

update_erlt(Str, Val) ->
    Str#{a := Val}.

update_erlt(Str, Val1, Val2) ->
    Str#{a := Val1, c := Val2}.

make_erl1(Val) ->
    #erl1{x = undefined,
          y = Val,
          z = #{'--struct--' => erlt,
                a => undefined,
                b => 1 + 2,
                c => undefined}}.

field_erl1(Rec) ->
    Rec#erl1.x.

update_erl1(Rec, Val) ->
    Rec#erl1{x = Val}.

update_erl1(Rec, Val1, Val2) ->
    Rec#erl1{x = Val1, z = Val2}.



