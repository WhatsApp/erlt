  1 -module(subtype_neg).                      |         | 
  2                                            |         | 
  3 -compile([export_all, nowarn_export_all]). |         | 
  4                                            |         | 
  5 -type ab() :: a | b.                       |         | 
  6 -type pair_diff_elems() ::                 |         | 
  7     {a, b} | {b, a}.                       |         | 
  8 -type pair_ab() ::                         |         | 
  9     {ab(), ab()}.                          |         | 
 10                                            |         | 
 11 -spec f01(any()) -> {A, A}.                |         | 
 12 f01(X) -> X.                               | ERROR   | X. Expected: {A, A}, Got: term()
 13                                            |         | 
 14 -spec f02(any()) -> atom().                |         | 
 15 f02(X) -> X.                               | ERROR   | X. Expected: atom(), Got: term()
 16                                            |         | 
 17 -spec f03 (fun((atom()) -> any())) ->      |         | 
 18            fun((any()) -> atom()).         |         | 
 19 f03(F) -> F.                               | ERROR   | F. Expected: fun((term()) -> atom()), Got: fun((atom()) -> term())
 20                                            |         | 
 21 -spec f04(a | b | c) -> (a | b).           |         | 
 22 f04(X) -> X.                               | ERROR   | X. Expected: 'a' | 'b', Got: 'a' | 'b' | 'c'
 23                                            |         | 
 24 -spec f05(a | b) -> none() | none().       |         | 
 25 f05(X) -> X.                               | ERROR   | X. Expected: none() | none(), Got: 'a' | 'b'
 26                                            |         | 
 27 -spec f06({a | b, a | b}) ->               |         | 
 28     {a, b} | {b, a}.                       |         | 
 29 f06(X) -> X.                               | ERROR   | X. Expected: {'a', 'b'} | {'b', 'a'}, Got: {'a' | 'b', 'a' | 'b'}
 30                                            |         | 
 31 -spec f07(pair_ab()) ->                    |         | 
 32     pair_diff_elems().                     |         | 
 33 f07(X) -> X.                               | ERROR   | X. Expected: {'a', 'b'} | {'b', 'a'}, Got: {'a' | 'b', 'a' | 'b'}
 34                                            |         | 
 35 -spec f08({none(), none()}) -> none().     |         | 
 36 f08(X) -> X.                               | ERROR   | X. Expected: none(), Got: {none(), none()}
 37                                            |         | 
 38 -spec map01(map()) -> #{}.                 |         | 
 39 map01(M) -> M.                             | ERROR   | M. Expected: #{}, Got: #{term() => term()}
 40                                            |         | 
 41 -spec map02(#{a => atom()})                |         | 
 42         -> #{a := atom()}.                 |         | 
 43 map02(M) -> M.                             | ERROR   | M. Expected: #{a := atom()}, Got: #{a => atom()}
 44                                            |         | 
 45 -spec map03(#{a := atom(), b := atom()})   |         | 
 46         -> #{a => atom()}.                 |         | 
 47 map03(M) -> M.                             | ERROR   | M. Expected: #{a => atom()}, Got: #{a := atom(), b := atom()}
 48                                            |         | 
 49 -spec map05(#{                             |         | 
 50     a | b => a | b | c                     |         | 
 51 }) -> #{                                   |         | 
 52     a := a | b,                            |         | 
 53     b => a | b                             |         | 
 54 }.                                         |         | 
 55 map05(M) -> M.                             | ERROR   | M. Expected: #{a := 'a' | 'b', b => 'a' | 'b'}, Got: #{'a' | 'b' => 'a' | 'b' | 'c'}
 56                                            |         | 
 57 -spec map06(#{any() => integer()})         |         | 
 58         -> #{atom() => integer()}.         |         | 
 59 map06(M) -> M.                             | ERROR   | M. Expected: #{atom() => number()}, Got: #{term() => number()}
 60                                            |         | 
 61 -spec map07(#{atom() => any()})            |         | 
 62         -> #{atom() => integer()}.         |         | 
 63 map07(M) -> M.                             | ERROR   | M. Expected: #{atom() => number()}, Got: #{atom() => term()}
 64                                            |         | 
 65 -spec map08(#{atom() => any()})            |         | 
 66         -> #{}.                            |         | 
 67 map08(M) -> M.                             | ERROR   | M. Expected: #{}, Got: #{atom() => term()}
